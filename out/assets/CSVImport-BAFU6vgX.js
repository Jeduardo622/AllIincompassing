import{r as U,n as Z,_ as J,j as e,I as z,l as R,aj as Y,a as T}from"./vendor-CkTWaQD2.js";import{f as P,s as F,l as L,a as ee}from"./reports-B0fjwS8-.js";import{p as se}from"./validation-aamM88qh.js";import{u as te}from"./organization-IJZMqQph.js";import{c as ne}from"./mutations-C9TJgpVo.js";const ie={client:["first_name","last_name","email","date_of_birth"],therapist:["first_name","last_name","email"]},re=l=>Array.isArray(l)?l.length>0:typeof l=="string"?l.trim().length>0:l!=null,_=(l,s)=>{l.includes(s)||l.push(s)},oe=l=>{if(!l)return l;if(l.includes("/")){const s=l.split("/").map(g=>g.trim());if(s.length===3){const[g,C,m]=s;if(m.length===4)return`${m}-${g.padStart(2,"0")}-${C.padStart(2,"0")}`}}return l},le=(l,s,g)=>{const C={};Object.entries(s).forEach(([v,c])=>{if(!c)return;const D=l[Number(v)];if(D===void 0)return;let f=D.trim();if(g==="client"&&c==="date_of_birth"&&(f=oe(f)),["service_preference","service_type","specialties","preferred_areas"].includes(c)){C[c]=f?f.split(",").map(j=>j.trim()).filter(j=>j.length>0):[];return}C[c]=f||null});const m=se(C);if(typeof m.first_name=="string"&&m.first_name.length>0||typeof m.last_name=="string"&&m.last_name.length>0){const v=[m.first_name,m.middle_name,m.last_name].map(c=>typeof c=="string"?c.trim():"").filter(c=>c.length>0);m.full_name=v.join(" ")}return m},me=(l,s,g)=>{const C=[],m=new Set,v=new Set,c=new Set,D=new Set;return l.forEach((f,j)=>{const N=le(f,s,g),I=[];ie[g].forEach(x=>{const $=N[x];re($)||_(I,`Missing required field: ${x}`)});const S=typeof N.email=="string"?N.email:void 0;if(S&&(c.add(S),m.has(S)?_(I,`Duplicate email in import file: ${S}`):m.add(S)),g==="client"){const x=typeof N.client_id=="string"?N.client_id:void 0;x&&(D.add(x),v.has(x)?_(I,`Duplicate client ID in import file: ${x}`):v.add(x))}C.push({rowIndex:j,data:N,errors:I})}),{records:C,uniqueEmails:Array.from(c),uniqueClientIds:Array.from(D)}},ae=(l,{entityType:s,existingEmails:g,existingClientIds:C})=>{const m=g??new Set,v=C??new Set;return l.forEach(c=>{if(!c.data)return;const D=typeof c.data.email=="string"?c.data.email:void 0;if(D&&m.has(D)&&_(c.errors,`Email ${D} already exists`),s==="client"){const f=typeof c.data.client_id=="string"?c.data.client_id:void 0;f&&v.has(f)&&_(c.errors,`Client ID ${f} already exists`)}}),l},Ne=({onClose:l,entityType:s="client"})=>{const[g,C]=U.useState(null),[m,v]=U.useState([]),[c,D]=U.useState([]),[f,j]=U.useState({}),[N,I]=U.useState({total:0,processed:0,success:0,failed:0,inProgress:!1,errors:[]}),[A,S]=U.useState("upload"),x=te(),$=Z(),O=n=>{if(n.target.files&&n.target.files[0]){C(n.target.files[0]);const t=new FileReader;t.onload=a=>{a.target&&typeof a.target.result=="string"&&H(a.target.result)},t.readAsText(n.target.files[0])}},H=n=>{const t=n.split(`
`);let a=0;for(let u=0;u<t.length;u++)if(t[u].includes("First Name")&&t[u].includes("Last Name")&&t[u].includes("DOB")){a=u;break}const b=t[a].split(",").map(u=>u.trim()),k=[];for(let u=a+1;u<t.length;u++)if(t[u].trim()){const i=B(t[u]);i.length>=b.length/2&&k.push(i)}D(b),v(k);const d={};b.forEach((u,i)=>{const r=u.toLowerCase().trim();r.includes("first name")?d[i.toString()]="first_name":r.includes("middle name")?d[i.toString()]="middle_name":r.includes("last name")?d[i.toString()]="last_name":(r.includes("dob")||r.includes("birth"))&&s==="client"?d[i.toString()]="date_of_birth":r.includes("gender")&&s==="client"?d[i.toString()]="gender":r.includes("street")?d[i.toString()]=s==="client"?"address_line1":"street":r.includes("city")?d[i.toString()]="city":r.includes("state")?d[i.toString()]="state":r.includes("postal")||r.includes("zip")?d[i.toString()]="zip_code":s==="client"&&r.includes("client id")||s==="therapist"&&r.includes("staff id")?d[i.toString()]=s==="client"?"client_id":"staff_id":s==="client"&&r.includes("uci")?d[i.toString()]="cin_number":s==="therapist"&&r.includes("npi")?d[i.toString()]="npi_number":s==="therapist"&&r.includes("facility")?d[i.toString()]="facility":s==="therapist"&&r.includes("title")?d[i.toString()]="title":r.includes("email")?d[i.toString()]="email":r.includes("phone")?d[i.toString()]="phone":r.includes("notes")&&(d[i.toString()]="notes")}),j(d),S("map")},B=n=>{const t=[];let a="",V=!1;for(let b=0;b<n.length;b++){const k=n[b];k==='"'?V=!V:k===","&&!V?(t.push(a),a=""):a+=k}return t.push(a),t.map(b=>b.trim())},Q=(n,t)=>{j(a=>({...a,[n]:t}))},q=U.useCallback(()=>{S("preview")},[]),W=J({mutationFn:async n=>{if(!x)throw new Error("Organization context is required to import records.");if(s==="client"){const b={...n,organization_id:x};return ne(P,b)}const t={...n,organization_id:x},{data:a,error:V}=await P.from("therapists").insert([t]).select("id").single();if(V)throw V;return a}}),G=async()=>{if(!x){F("Select or configure an organization before importing records.");return}I({total:m.length,processed:0,success:0,failed:0,inProgress:!0,errors:[]}),S("import");const{records:n,uniqueEmails:t,uniqueClientIds:a}=me(m,f,s),V=s==="client"?"clients":"therapists";let b=new Set;const k=new Set;try{if(t.length>0){const{data:o,error:E}=await P.from(V).select(s==="client"?"email, client_id":"email").in("email",t);if(E)throw E;if(o){const h=o;b=new Set(h.map(p=>p.email).filter(p=>typeof p=="string"&&p.length>0)),s==="client"&&h.map(p=>p.client_id).filter(p=>typeof p=="string"&&p.length>0).forEach(p=>k.add(p))}}if(s==="client"&&a.length>0){const{data:o,error:E}=await P.from("clients").select("client_id").in("client_id",a);if(E)throw E;o&&o.map(h=>h.client_id).filter(h=>typeof h=="string"&&h.length>0).forEach(h=>k.add(h))}}catch(o){const E=o instanceof Error?o.message:"Failed to validate import data";L.error("CSV import pre-validation failed",{error:o,context:{component:"CSVImport",operation:"preValidation"},metadata:{entityType:s}}),I({total:m.length,processed:0,success:0,failed:0,inProgress:!1,errors:[{row:0,message:E}]}),F(`Unable to validate import: ${E}`);return}ae(n,{entityType:s,existingEmails:b,existingClientIds:s==="client"?k:void 0});const d=n.filter(o=>o.errors.length>0||!o.data),u=n.filter(o=>o.errors.length===0&&!!o.data);let i=d.length,r=0,w=d.length,y=d.map(o=>({row:o.rowIndex+1,message:o.errors.join("; ")}));if(I({total:m.length,processed:i,success:r,failed:w,inProgress:!0,errors:y}),u.length===0){I(o=>({...o,inProgress:!1})),F(`No valid ${s}s to import. Please fix validation errors.`);return}const M=5;for(let o=0;o<u.length;o+=M){const E=u.slice(o,o+M);await Promise.all(E.map(async h=>{try{await W.mutateAsync(h.data),r+=1,i+=1,I(p=>({...p,processed:i,success:r}))}catch(p){w+=1,i+=1;const K=p instanceof Error?p.message:"Unknown error";L.error("CSV import row processing failed",{error:p,context:{component:"CSVImport",operation:"processRow"},metadata:{rowIndex:h.rowIndex,entityType:s}}),y=[...y,{row:h.rowIndex+1,message:K}],I(X=>({...X,processed:i,failed:w,errors:y}))}}))}$.invalidateQueries({queryKey:[s==="client"?"clients":"therapists"]}),I(o=>({...o,inProgress:!1,processed:i,success:r,failed:w,errors:y})),w===0?ee(`Successfully imported ${r} ${s}s`):F(`Imported ${r} ${s}s with ${w} failures`)};return e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-white dark:bg-dark-lighter rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxDEV("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center",children:[e.jsxDEV("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Import ",s==="client"?"Clients":"Therapists"," from CSV"]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:385,columnNumber:11},void 0),e.jsxDEV("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:e.jsxDEV(z,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:392,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:388,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:384,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4",children:[A==="upload"&&e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsxDEV("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mb-6 max-w-xl",children:e.jsxDEV("div",{className:"flex",children:[e.jsxDEV(R,{className:"h-5 w-5 text-blue-500 mr-2 flex-shrink-0"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:401,columnNumber:19},void 0),e.jsxDEV("div",{children:e.jsxDEV("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Upload a CSV file containing ",s==="client"?"client":"therapist"," information. The file should include columns for information such as names, contact details, etc."]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:403,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:402,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:400,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:399,columnNumber:15},void 0),e.jsxDEV("label",{className:"flex flex-col items-center px-4 py-6 bg-white dark:bg-gray-800 text-blue rounded-lg shadow-lg tracking-wide uppercase border border-blue cursor-pointer hover:bg-blue-500 hover:text-white",children:[e.jsxDEV(Y,{className:"w-8 h-8"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:412,columnNumber:17},void 0),e.jsxDEV("span",{className:"mt-2 text-base leading-normal",children:"Select a CSV file"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:413,columnNumber:17},void 0),e.jsxDEV("input",{type:"file",accept:".csv",className:"hidden",onChange:O},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:414,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:411,columnNumber:15},void 0),g&&e.jsxDEV("div",{className:"mt-4 text-center",children:e.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Selected file: ",g.name]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:419,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:418,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:398,columnNumber:13},void 0),A==="map"&&c.length>0&&e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Map CSV Headers to ",s==="client"?"Client":"Therapist"," Fields"]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:427,columnNumber:15},void 0),e.jsxDEV("p",{className:"mb-4 text-sm text-gray-600 dark:text-gray-400",children:["Please map the CSV headers to the corresponding ",s," fields. We've made some suggestions based on the header names."]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:430,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mb-6",children:e.jsxDEV("div",{className:"flex",children:[e.jsxDEV(R,{className:"h-5 w-5 text-blue-500 mr-2 flex-shrink-0"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:436,columnNumber:19},void 0),e.jsxDEV("div",{children:e.jsxDEV("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Fields like First Name, Last Name, and Date of Birth are most important. Other fields are optional."},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:438,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:437,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:435,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:434,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 mb-6",children:c.map((n,t)=>e.jsxDEV("div",{className:"border dark:border-gray-700 rounded-lg p-4",children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:448,columnNumber:21},void 0),e.jsxDEV("select",{value:f[t.toString()]||"",onChange:a=>Q(t.toString(),a.target.value),className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:text-gray-200",children:[e.jsxDEV("option",{value:"",children:"-- Skip this field --"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:456,columnNumber:23},void 0),e.jsxDEV("option",{value:"first_name",children:"First Name"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:457,columnNumber:23},void 0),e.jsxDEV("option",{value:"middle_name",children:"Middle Name"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:458,columnNumber:23},void 0),e.jsxDEV("option",{value:"last_name",children:"Last Name"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:459,columnNumber:23},void 0),e.jsxDEV("option",{value:"email",children:"Email"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:460,columnNumber:23},void 0),e.jsxDEV("option",{value:"phone",children:"Phone"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:461,columnNumber:23},void 0),s==="client"?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("option",{value:"date_of_birth",children:"Date of Birth"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:464,columnNumber:27},void 0),e.jsxDEV("option",{value:"gender",children:"Gender"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:465,columnNumber:27},void 0),e.jsxDEV("option",{value:"client_id",children:"Client ID"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:466,columnNumber:27},void 0),e.jsxDEV("option",{value:"cin_number",children:"UCI/CIN Number"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:467,columnNumber:27},void 0),e.jsxDEV("option",{value:"service_preference",children:"Service Preference"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:468,columnNumber:27},void 0),e.jsxDEV("option",{value:"diagnosis",children:"Diagnosis"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:469,columnNumber:27},void 0),e.jsxDEV("option",{value:"preferred_language",children:"Preferred Language"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:470,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:463,columnNumber:25},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("option",{value:"title",children:"Title/Position"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:474,columnNumber:27},void 0),e.jsxDEV("option",{value:"staff_id",children:"Staff ID"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:475,columnNumber:27},void 0),e.jsxDEV("option",{value:"npi_number",children:"NPI Number"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:476,columnNumber:27},void 0),e.jsxDEV("option",{value:"medicaid_id",children:"Medicaid ID"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:477,columnNumber:27},void 0),e.jsxDEV("option",{value:"service_type",children:"Service Types"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:478,columnNumber:27},void 0),e.jsxDEV("option",{value:"specialties",children:"Specialties"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:479,columnNumber:27},void 0),e.jsxDEV("option",{value:"facility",children:"Facility/Location"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:480,columnNumber:27},void 0),e.jsxDEV("option",{value:"supervisor",children:"Supervisor"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:481,columnNumber:27},void 0),e.jsxDEV("option",{value:"weekly_hours_min",children:"Min Weekly Hours"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:482,columnNumber:27},void 0),e.jsxDEV("option",{value:"weekly_hours_max",children:"Max Weekly Hours"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:483,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:473,columnNumber:25},void 0),s==="client"?e.jsxDEV("option",{value:"address_line1",children:"Street Address"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:487,columnNumber:25},void 0):e.jsxDEV("option",{value:"street",children:"Street Address"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:489,columnNumber:25},void 0),e.jsxDEV("option",{value:"city",children:"City"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:491,columnNumber:23},void 0),e.jsxDEV("option",{value:"state",children:"State"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:492,columnNumber:23},void 0),e.jsxDEV("option",{value:"zip_code",children:"Postal/ZIP Code"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:493,columnNumber:23},void 0),e.jsxDEV("option",{value:"notes",children:"Notes"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:494,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:451,columnNumber:21},void 0)]},t,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:447,columnNumber:19},void 0))},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:445,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV("button",{onClick:q,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Preview Import Data"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:501,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:500,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:426,columnNumber:13},void 0),A==="preview"&&e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Preview Import Data"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:513,columnNumber:15},void 0),e.jsxDEV("p",{className:"mb-4 text-sm text-gray-600 dark:text-gray-400",children:["Review the data that will be imported. ",m.length," ",s,"s will be created."]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:516,columnNumber:15},void 0),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsxDEV("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxDEV("tr",{children:Object.entries(f).filter(([n,t])=>t).map(([n,t])=>e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:t},n,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:525,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:523,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:522,columnNumber:19},void 0),e.jsxDEV("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m.slice(0,5).map((n,t)=>e.jsxDEV("tr",{children:Object.entries(f).filter(([a,V])=>V).map(([a])=>e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:n[parseInt(a)]||"-"},a,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:535,columnNumber:27},void 0))},t,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:533,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:531,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:521,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:520,columnNumber:15},void 0),m.length>5&&e.jsxDEV("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:["... and ",m.length-5," more rows"]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:546,columnNumber:17},void 0),e.jsxDEV("div",{className:"mt-4 flex justify-end space-x-4",children:[e.jsxDEV("button",{onClick:()=>S("map"),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Back to Mapping"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:552,columnNumber:17},void 0),e.jsxDEV("button",{onClick:G,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Start Import"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:558,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:551,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:512,columnNumber:13},void 0),A==="import"&&e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Importing ",s==="client"?"Clients":"Therapists"]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:570,columnNumber:15},void 0),e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("div",{className:"mb-2 flex justify-between",children:[e.jsxDEV("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Progress"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:576,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[N.processed," of ",N.total]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:577,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:575,columnNumber:17},void 0),e.jsxDEV("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:e.jsxDEV("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${N.processed/N.total*100}%`}},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:582,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:581,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:574,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxDEV("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(T,{className:"h-5 w-5 text-green-500 mr-2"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:592,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Successful Imports"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:593,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:591,columnNumber:19},void 0),e.jsxDEV("p",{className:"mt-2 text-2xl font-bold text-green-700 dark:text-green-300",children:N.success},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:597,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:590,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg",children:[e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(z,{className:"h-5 w-5 text-red-500 mr-2"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:604,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Failed Imports"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:605,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:603,columnNumber:19},void 0),e.jsxDEV("p",{className:"mt-2 text-2xl font-bold text-red-700 dark:text-red-300",children:N.failed},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:609,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:602,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:589,columnNumber:15},void 0),N.errors.length>0&&e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-2",children:"Error Details"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:617,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-red-50 dark:bg-red-900/10 rounded-lg p-4 max-h-48 overflow-y-auto",children:N.errors.map((n,t)=>e.jsxDEV("div",{className:"text-sm text-red-700 dark:text-red-300 mb-1",children:[e.jsxDEV("span",{className:"font-medium",children:["Row ",n.row,":"]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:623,columnNumber:25},void 0)," ",n.message]},t,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:622,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:620,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:616,columnNumber:17},void 0),!N.inProgress&&e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Done"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:632,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:631,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:569,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:396,columnNumber:9},void 0),(A==="upload"||A==="map")&&e.jsxDEV("div",{className:"p-4 border-t dark:border-gray-700 flex justify-between",children:[e.jsxDEV("button",{onClick:l,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:646,columnNumber:13},void 0),A==="map"&&e.jsxDEV("button",{onClick:q,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Continue"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:654,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:645,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:383,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/components/CSVImport.tsx",lineNumber:382,columnNumber:5},void 0)};export{Ne as C};
