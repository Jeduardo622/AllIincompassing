import{r as N,j as e,l as g,aZ as x,p as D,c as f,a4 as y,ae as k,d as v,O as C}from"./vendor-CkTWaQD2.js";import{u as j,a as A,s as I,l as u}from"./reports-B0fjwS8-.js";import{b as E,c as F,d as U}from"./hooks-BqhDJIKU.js";import{f as m}from"./dates-C30WUoI7.js";import"./maps-DwSjqVUD.js";import"./supabase-BgfCgt6W.js";import"./fetchers-BMhPL40Q.js";import"./select-CDRQddG6.js";const V=a=>{if(!a)return"N/A";try{return m(new Date(a),"MMMM d, yyyy")}catch(t){return u.error("Failed to format date",{error:t,metadata:{value:a}}),a}},d=a=>{try{return m(new Date(a),"MMMM d, yyyy h:mm a")}catch(t){return u.error("Failed to format datetime",{error:t,metadata:{value:a}}),a}},w=a=>{if(!a)return null;const{last_confirmed_at:t}=a.metadata;return typeof t!="string"||t.length===0?null:`Last confirmed ${d(t)}`},M=(a,t)=>{try{return`${m(new Date(a),"h:mm a")} – ${m(new Date(t),"h:mm a")}`}catch(i){return u.error("Failed to format time range",{error:i,metadata:{start:a,end:t}}),`${a} – ${t}`}};function R(){const{profile:a,user:t}=j(),i=E(),o=F(),l=U(),p=N.useMemo(()=>o.data?new Map(o.data.map(s=>[s.clientId,s])):new Map,[o.data]),h=async s=>{try{await l.mutateAsync(s),A("Thanks! Your contact information has been confirmed.")}catch(c){I(c)}};if(i.isLoading)return e.jsxDEV("div",{className:"flex h-full items-center justify-center",children:e.jsxDEV("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-blue-600"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:89,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:88,columnNumber:7},this);if(i.isError)return e.jsxDEV("div",{className:"rounded-lg border border-red-200 bg-red-50 p-6 text-red-700",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(g,{className:"h-6 w-6"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:98,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-lg font-semibold",children:"We were unable to load your family dashboard."},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:100,columnNumber:13},this),e.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:i.error?.message??"Please refresh the page or try again later."},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:101,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:99,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:97,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:96,columnNumber:7},this);const n=i.data??[];return e.jsxDEV("div",{className:"space-y-8",children:[e.jsxDEV("div",{className:"rounded-lg bg-white p-6 shadow-sm dark:bg-dark-lighter",children:e.jsxDEV("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Welcome back",a?.first_name?`, ${a.first_name}`:"","!"]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:117,columnNumber:13},this),e.jsxDEV("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:["Here's a snapshot of the upcoming sessions and updates for your kiddo",n.length!==1?"s":"","."]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:120,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:116,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-3 rounded-md bg-blue-50 px-4 py-2 text-blue-700 dark:bg-blue-900/30 dark:text-blue-200",children:[e.jsxDEV(x,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:125,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm font-medium",children:["You're signed in as ",t?.email??"guardian"]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:126,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:124,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:115,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:114,columnNumber:7},this),n.length===0?e.jsxDEV("div",{className:"rounded-lg border border-dashed border-gray-300 bg-white p-8 text-center dark:border-gray-700 dark:bg-dark-lighter",children:[e.jsxDEV(D,{className:"mx-auto h-12 w-12 text-gray-400"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:135,columnNumber:11},this),e.jsxDEV("h2",{className:"mt-4 text-lg font-semibold text-gray-900 dark:text-white",children:"No linked dependents yet"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:136,columnNumber:11},this),e.jsxDEV("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Once your care team links your account to a kiddo, their information will appear here automatically."},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:137,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:134,columnNumber:9},this):e.jsxDEV("div",{className:"space-y-6",children:n.map(s=>{const c=p.get(s.clientId),b=w(c);return e.jsxDEV("section",{className:"rounded-xl border border-gray-200 bg-white shadow-sm transition hover:shadow-md dark:border-gray-700 dark:bg-dark-lighter",children:[e.jsxDEV("div",{className:"flex flex-col gap-4 border-b border-gray-100 p-6 md:flex-row md:items-center md:justify-between dark:border-gray-800",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.fullName},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:153,columnNumber:21},this),e.jsxDEV("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:[s.relationship?`${s.relationship} • `:"",s.isPrimaryGuardian?"Primary guardian":"Guardian"]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:154,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:152,columnNumber:19},this),e.jsxDEV("div",{className:"flex flex-col gap-2 text-sm text-gray-600 dark:text-gray-300 md:items-end",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(f,{className:"h-4 w-4 text-blue-500"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:161,columnNumber:23},this),e.jsxDEV("span",{children:["Date of birth: ",V(s.dateOfBirth)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:162,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:160,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(y,{className:"h-4 w-4 text-blue-500"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:165,columnNumber:23},this),e.jsxDEV("span",{children:s.email??"No email on file"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:166,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:164,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(k,{className:"h-4 w-4 text-blue-500"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:169,columnNumber:23},this),e.jsxDEV("span",{children:s.phone??"No phone on file"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:170,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:168,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:159,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:151,columnNumber:17},this),e.jsxDEV("div",{className:"grid gap-6 p-6 md:grid-cols-2",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Upcoming sessions"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:178,columnNumber:23},this),e.jsxDEV("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.upcomingSessions.length," scheduled"]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:179,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:177,columnNumber:21},this),s.upcomingSessions.length===0?e.jsxDEV("p",{className:"rounded-md border border-dashed border-gray-200 p-4 text-sm text-gray-500 dark:border-gray-700 dark:text-gray-400",children:"No upcoming sessions on the calendar yet."},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:184,columnNumber:23},this):e.jsxDEV("ul",{className:"space-y-3",children:s.upcomingSessions.map(r=>e.jsxDEV("li",{className:"rounded-lg border border-gray-200 p-4 text-sm dark:border-gray-700",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-gray-900 dark:text-white",children:[e.jsxDEV("span",{children:d(r.startTime)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:195,columnNumber:31},this),e.jsxDEV("span",{className:"text-xs font-medium uppercase text-blue-600 dark:text-blue-300",children:r.status},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:196,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:194,columnNumber:29},this),e.jsxDEV("div",{className:"mt-2 flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[e.jsxDEV(v,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:201,columnNumber:31},this),e.jsxDEV("span",{children:M(r.startTime,r.endTime)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:202,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:200,columnNumber:29},this),r.therapist?.fullName&&e.jsxDEV("div",{className:"mt-1 text-gray-600 dark:text-gray-300",children:["With ",r.therapist.fullName]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:205,columnNumber:31},this)]},r.id,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:190,columnNumber:27},this))},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:188,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:176,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Notes from your care team"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:217,columnNumber:23},this),e.jsxDEV("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.notes.length," visible"]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:218,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:216,columnNumber:21},this),s.notes.length===0?e.jsxDEV("p",{className:"rounded-md border border-dashed border-gray-200 p-4 text-sm text-gray-500 dark:border-gray-700 dark:text-gray-400",children:"Notes that are shared with families will appear here."},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:223,columnNumber:23},this):e.jsxDEV("ul",{className:"space-y-3",children:s.notes.map(r=>e.jsxDEV("li",{className:"rounded-lg border border-gray-200 p-4 text-sm dark:border-gray-700",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-gray-900 dark:text-white",children:[e.jsxDEV("span",{children:r.createdByName??"Care team member"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:231,columnNumber:31},this),r.createdAt&&e.jsxDEV("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:d(r.createdAt)},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:233,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:230,columnNumber:29},this),e.jsxDEV("p",{className:"mt-2 text-gray-700 dark:text-gray-300",children:r.content??"No description provided."},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:238,columnNumber:29},this),r.status&&e.jsxDEV("span",{className:"mt-2 inline-flex items-center gap-1 text-xs font-medium uppercase text-blue-600 dark:text-blue-300",children:[e.jsxDEV(C,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:241,columnNumber:33},this),r.status]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:240,columnNumber:31},this)]},r.id,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:229,columnNumber:27},this))},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:227,columnNumber:23},this),e.jsxDEV("div",{className:"rounded-lg border border-blue-100 bg-blue-50 p-4 text-sm text-blue-800 dark:border-blue-800/50 dark:bg-blue-900/20 dark:text-blue-200",children:[e.jsxDEV("p",{className:"font-medium",children:"Guardian contact information"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:251,columnNumber:23},this),e.jsxDEV("p",{className:"mt-1 text-blue-700 dark:text-blue-100",children:"Let us know that your phone and email are still the best way to reach you."},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:252,columnNumber:23},this),e.jsxDEV("div",{className:"mt-3 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxDEV("button",{type:"button",onClick:()=>h(s.clientId),disabled:l.isPending&&l.variables===s.clientId,className:"inline-flex items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-70",children:l.isPending&&l.variables===s.clientId?e.jsxDEV("span",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"h-4 w-4 animate-spin rounded-full border-b-2 border-white"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:264,columnNumber:31},this),"Saving…"]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:263,columnNumber:29},this):"Confirm my contact details"},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:256,columnNumber:25},this),b&&e.jsxDEV("span",{className:"text-xs uppercase tracking-wide text-blue-600 dark:text-blue-300",children:b},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:272,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:255,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:250,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:215,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:175,columnNumber:17},this)]},s.clientId,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:147,columnNumber:15},this)})},void 0,!1,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:142,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/test/Desktop/AllIincompassing/src/pages/FamilyDashboard.tsx",lineNumber:113,columnNumber:5},this)}export{R as default};
