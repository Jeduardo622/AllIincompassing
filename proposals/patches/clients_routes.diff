# Placeholder diff outlining client-route hardening
@@
- Deno.serve(async (req) => {
-  if (req.method === "OPTIONS") { ... }
-  try {
-    const db = createRequestClient(req);
-    await getUserOrThrow(db);
-    const { clientId } = await req.json();
-    ...
-  }
+export default createProtectedRoute(async (req, userContext) => {
+  if (req.method !== 'POST') return methodNotAllowed();
+  const db = createServiceRoleClient();
+  const { clientId } = await validatePayload(req, ClientDetailsSchema);
+  await assertSameOrganization(db, userContext, { clientId });
+  ...
+}, RouteOptions.client);
